<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.youkang.system.mapper.CustomerInfoMapper">

    <resultMap type="CustomerInfo" id="YkCustomerInfoResult">
        <result property="id"              column="id"              />
        <result property="customerName"    column="customer_name"   />
        <result property="region"          column="region"          />
        <result property="address"         column="address"         />
        <result property="phone"           column="phone"           />
        <result property="email"           column="email"           />
        <result property="wechatId"        column="wechat_id"       />
        <result property="customerLevel"   column="customer_level"  />
        <result property="status"          column="status"          />
        <result property="salesPerson"     column="sales_person"    />
        <result property="customerUnit"    column="customer_unit"   />
        <result property="paymentMethod"   column="payment_method"  />
        <result property="invoiceType"     column="invoice_type"    />
        <result property="remarks"         column="remarks"         />
        <result property="createBy"        column="create_by"       />
        <result property="createTime"      column="create_time"     />
        <result property="updateBy"        column="update_by"       />
        <result property="updateTime"      column="update_time"     />
        <result property="company"         column="company"         />
    </resultMap>
    <select id="customerSelector" resultType="com.youkang.system.domain.resp.customer.CustomerSelectorResp">
        select yci.id,yci.customer_name,yci.subject_group_id,ysgi.name,
               yci.address,yci.email,yci.phone,yci.customer_unit
        from yk_customer_info yci
        left join yk_subject_group_info ysgi on yci.subject_group_id = ysgi.id
        <where>
            <if test="queryString != null and queryString != ''">
                yci.id like concat('%',#{queryString},'%')
                or yci.customer_name like concat('%',#{queryString},'%')
            </if>
        </where>
    </select>

</mapper>
